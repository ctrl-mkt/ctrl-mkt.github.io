<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SLAM BURGER | Îß§Ïû• Í¥ÄÎ¶¨ ÏãúÏä§ÌÖú</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- Pretendard Font -->
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />

    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #F2F4F6; /* Toss Grey */
            color: #191F28; /* Toss Black */
            -webkit-font-smoothing: antialiased;
        }
        
        /* Custom Scrollbar for Chat */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Animation for Slide-in */
        .slide-in-enter {
            transform: translateX(100%);
        }
        .slide-in-enter-active {
            transform: translateX(0);
            transition: transform 300ms ease-in-out;
        }
        .slide-in-exit {
            transform: translateX(0);
        }
        .slide-in-exit-active {
            transform: translateX(100%);
            transition: transform 300ms ease-in-out;
        }

        /* Mobile Font Sizing Adjustments */
        @media (max-width: 768px) {
            .mobile-text-sm { font-size: 0.875rem; } /* 14px */
            .mobile-text-xs { font-size: 0.75rem; }  /* 12px */
        }
    </style>
    
    <!-- Tailwind Config for Brand Colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        slamRed: '#E60023', /* Approximate Pantone Red for Web */
                        slamRedDark: '#C2001E',
                        tossBlue: '#3182F6',
                        tossGrey: '#F2F4F6',
                        tossDarkGrey: '#333D4B',
                        tossLightGrey: '#E5E8EB'
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- GAS API URL ---
        const GAS_API_URL = "https://script.google.com/macros/s/AKfycbxxCBEDaIVElgUjmI5c7hf_AdY7qxrRhe0kjlWC3LjHVYoRp06-iUcOv90NAHuW2rIJ/exec";

        // --- Initial Mock Data (Fallback) ---
        const INITIAL_DATA = {
            scrum: [
                { id: 1, category: 'Ïò§Ï†Ñ', title: 'ÏõîÍ∞Ñ Î™©Ìëú', desc: 'Í∞ùÎã®Í∞Ä 5% ÏÉÅÏäπ, Ïã†Î©îÎâ¥ ÌåêÎß§ 1ÏúÑ', checked: false },
                { id: 2, category: 'Ïò§Ï†Ñ', title: 'ÏùºÍ∞Ñ Îß§Ï∂ú Î™©Ìëú', desc: '120ÎßåÏõê Îã¨ÏÑ± (ÌèâÏùº ÌèâÍ∑† ÎåÄÎπÑ +10%)', checked: false },
                { id: 3, category: 'Ïò§ÌõÑ', title: 'ÏùµÏùº Ï§ÄÎπÑ', desc: 'Ìå®Ìã∞ Ìï¥Îèô ÏÉÅÌÉú ÌôïÏù∏ Î∞è ÏÜåÏä§Î•ò ÌïÑÏóÖ', checked: false },
            ],
            cleaning: [
                { id: 1, title: 'Í∏∞Î¶Ñ Ï†ïÏ†ú/ÍµêÏ≤¥', cycle: 'Ï£º 3Ìöå', day: 'Ïõî/Ïàò/Í∏à', status: 'pending', detail: 'ÏÇ∞Í∞Ä Ï∏°Ï†ïÏßÄ ÌôïÏù∏ ÌïÑÏàò' },
                { id: 2, title: 'ÌõÑÎìú ÌïÑÌÑ∞', cycle: 'Ï£º 1Ìöå', day: 'ÎßàÍ∞ê', status: 'done', detail: 'Ï†ÑÏö© ÏÑ∏Ï†ú Î∂àÎ¶º ÏÑ∏Ï≤ô' },
                { id: 3, title: 'Ï†úÎπôÍ∏∞ Ï≤≠ÏÜå', cycle: 'Ïõî 1Ìöå', day: 'Ï≤´Ïß∏Ï£º Ìôî', status: 'pending', detail: 'ÎÇ¥Î∂Ä ÏñºÏùå Î™®Îëê Ï†úÍ±∞ ÌõÑ ÏÜåÎèÖ' },
            ],
            operation: [
                { id: 1, time: '09:00', task: 'Ïò§Ìîà Î≥µÏû• Ï†êÍ≤Ä', detail: 'Ïú†ÎãàÌèº, Î™®Ïûê, Î™ÖÏ∞∞, ÏúÑÏÉùÌôî Ï∞©Ïö©' },
                { id: 2, time: '09:30', task: 'Í∏∞Í∏∞ Ï†ïÏÉÅ ÏûëÎèô ÌôïÏù∏', detail: 'Ìè¨Ïä§, ÌÇ§Ïò§Ïä§ÌÅ¨, ÌäÄÍπÄÍ∏∞, ÎÉâÏû•Í≥† Ïò®ÎèÑ' },
                { id: 3, time: '11:00', task: 'ÏãùÏûêÏû¨ ÏÑ†ÏûÖÏÑ†Ï∂ú Ï†êÍ≤Ä', detail: 'Ïú†ÌÜµÍ∏∞Ìïú ÏûÑÎ∞ï ÏÉÅÌíà Ïä§Ìã∞Ïª§ Î∂ÄÏ∞©' },
            ],
            manual: [
                { id: 1, title: 'Í≥†Í∞ù ÏùëÎåÄ', content: 'ÏûÖÏ†ê/Ìá¥Ï†ê Ïù∏ÏÇ¨, Ïª¥ÌîåÎ†àÏù∏ ÎåÄÏ≤òÎ≤ï' },
                { id: 2, title: 'Î†àÏãúÌîº', content: 'Ïä¨Îû®Î≤ÑÍ±∞ Ï°∞Î¶¨ ÌëúÏ§Ä (Ìå®Ìã∞ ÍµΩÍ∏∞, ÏÜåÏä§ Ï†ïÎüâ)' },
                { id: 3, title: 'ÏúÑÏÉù ÏàòÏπô', content: 'ÏÜê ÏîªÍ∏∞ 30Ï¥à, ÎßàÏä§ÌÅ¨ Ï∞©Ïö©' },
            ]
        };

        // --- Components ---

        // 1. Modal Component (Toss Style)
        const Modal = ({ isOpen, onClose, title, children }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm">
                    <div className="bg-white w-full max-w-md rounded-3xl p-6 shadow-2xl animate-fade-in-up">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-xl font-bold text-gray-900">{title}</h3>
                            <button onClick={onClose} className="p-2 bg-gray-100 rounded-full hover:bg-gray-200">
                                <i className="ph ph-x text-lg"></i>
                            </button>
                        </div>
                        <div className="text-gray-600 mobile-text-sm">
                            {children}
                        </div>
                        <div className="mt-6">
                            <button onClick={onClose} className="w-full py-3.5 bg-slamRed text-white rounded-xl font-semibold active:scale-95 transition-transform">
                                ÌôïÏù∏
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // 2. Chatbot Component (Gemini AI)
        const ChatBot = () => {
            const [isOpen, setIsOpen] = useState(false);
            const [apiKey, setApiKey] = useState(localStorage.getItem('gemini_api_key') || '');
            const [messages, setMessages] = useState([
                { role: 'system', text: 'ÏïàÎÖïÌïòÏÑ∏Ïöî! Ïä¨Îû®Î≤ÑÍ±∞ AI Îß§ÎãàÏ†ÄÏûÖÎãàÎã§. Îß§Îâ¥Ïñº, Ï≤≠ÏÜå Î∞©Î≤ï, Î†àÏãúÌîº Îì± Î¨¥ÏóáÏù¥Îì† Î¨ºÏñ¥Î≥¥ÏÑ∏Ïöî.' }
            ]);
            const [input, setInput] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const messagesEndRef = useRef(null);

            const toggleChat = () => setIsOpen(!isOpen);

            const saveApiKey = () => {
                if(input.trim().startsWith('AI')) {
                    localStorage.setItem('gemini_api_key', input.trim());
                    setApiKey(input.trim());
                    setInput('');
                    alert('API KeyÍ∞Ä ÏïàÏ†ÑÌïòÍ≤å Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.');
                } else {
                    alert('Ïú†Ìö®Ìïú ÌÇ§Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                }
            };

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            };

            useEffect(() => {
                scrollToBottom();
            }, [messages, isOpen]);

            const handleSend = async () => {
                if (!input.trim()) return;
                
                const userMsg = input;
                setMessages(prev => [...prev, { role: 'user', text: userMsg }]);
                setInput('');
                setIsLoading(true);

                if (!apiKey) {
                    setMessages(prev => [...prev, { role: 'system', text: 'API KeyÍ∞Ä ÏÑ§Ï†ïÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§. ÏÑ§Ï†ï ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.' }]);
                    setIsLoading(false);
                    return;
                }

                try {
                    // Gemini 2.5 Flash API Call
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{
                                    text: `ÎÑàÎäî Ïä¨Îû®Î≤ÑÍ±∞Ïùò Ï†êÏû•Îì§ÏùÑ ÎèïÎäî AI Îß§ÎãàÏ†ÄÏïº. Îã§Ïùå Ïª®ÌÖçÏä§Ìä∏Î•º Î∞îÌÉïÏúºÎ°ú ÎãµÎ≥ÄÌï¥Ï§ò.
                                    
                                    [Îß§Ïû• Ïª®ÌÖçÏä§Ìä∏]
                                    - Î∏åÎûúÎìú: Ïä¨Îû®Î≤ÑÍ±∞ (ÏàòÏ†úÎ≤ÑÍ±∞ Ï†ÑÎ¨∏Ï†ê)
                                    - ÌÜ§Ïï§Îß§ÎÑà: ÏπúÏ†àÌïòÍ≥†, Î™ÖÌôïÌïòÍ≥†, ÌïµÏã¨Îßå Ï†ÑÎã¨.
                                    - Ï£ºÏöî ÏóÖÎ¨¥: Ìå®Ìã∞ ÍµΩÍ∏∞, Í∏∞Î¶Ñ Ï†ïÏ†ú, Í≥†Í∞ù ÏùëÎåÄ, Ïò§Ìîà/ÎßàÍ∞ê Ï≤≠ÏÜå.
                                    - ÏÇ¨Ïö©Ïûê ÏßàÎ¨∏: ${userMsg}`
                                }]
                            }]
                        })
                    });

                    const data = await response.json();
                    const aiText = data.candidates?.[0]?.content?.parts?.[0]?.text || "Ï£ÑÏÜ°Ìï©ÎãàÎã§. ÎãµÎ≥ÄÏùÑ ÏÉùÏÑ±Ìï† Ïàò ÏóÜÏäµÎãàÎã§.";
                    
                    setMessages(prev => [...prev, { role: 'system', text: aiText }]);
                } catch (error) {
                    setMessages(prev => [...prev, { role: 'system', text: 'ÎÑ§Ìä∏ÏõåÌÅ¨ Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.' }]);
                } finally {
                    setIsLoading(false);
                }
            };

            return (
                <>
                    {/* Floating Button */}
                    <button 
                        onClick={toggleChat}
                        className="fixed bottom-6 right-6 z-40 w-14 h-14 bg-slamRed rounded-full shadow-lg flex items-center justify-center text-white hover:bg-slamRedDark transition-colors"
                    >
                        {isOpen ? <i className="ph ph-x text-2xl"></i> : <i className="ph ph-chat-teardrop-text text-2xl"></i>}
                    </button>

                    {/* Chat Slide-over Panel */}
                    <div className={`fixed top-0 right-0 h-full w-full sm:w-[400px] bg-white shadow-2xl z-30 transform transition-transform duration-300 ease-in-out ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}>
                        <div className="flex flex-col h-full">
                            {/* Header */}
                            <div className="p-4 bg-slamRed text-white flex justify-between items-center shadow-sm">
                                <h2 className="font-bold text-lg flex items-center gap-2">
                                    <i className="ph ph-robot"></i> SLAM AI Manager
                                </h2>
                                {!apiKey && <span className="text-xs bg-white/20 px-2 py-1 rounded">Key ÌïÑÏöî</span>}
                            </div>

                            {/* Messages Area */}
                            <div className="flex-1 overflow-y-auto p-4 bg-gray-50 space-y-4">
                                {!apiKey ? (
                                    <div className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 text-center">
                                        <i className="ph ph-key text-4xl text-slamRed mb-2"></i>
                                        <h3 className="font-bold text-gray-800 mb-2">API Key ÏÑ§Ï†ï</h3>
                                        <p className="text-sm text-gray-500 mb-4">Gemini API KeyÎ•º ÏûÖÎ†•Ìï¥Ïïº Ï±óÎ¥áÏùÑ ÏÇ¨Ïö©Ìï† Ïàò ÏûàÏäµÎãàÎã§. (Î°úÏª¨ Î∏åÎùºÏö∞Ï†ÄÏóêÎßå Ï†ÄÏû•Îê©ÎãàÎã§)</p>
                                        <input 
                                            type="password" 
                                            placeholder="AIzaSy..." 
                                            className="w-full p-3 bg-gray-100 rounded-xl mb-2 text-sm focus:outline-none focus:ring-2 focus:ring-slamRed"
                                            value={input}
                                            onChange={(e) => setInput(e.target.value)}
                                        />
                                        <button onClick={saveApiKey} className="w-full py-2 bg-gray-800 text-white rounded-lg text-sm">Ï†ÄÏû•ÌïòÍ∏∞</button>
                                    </div>
                                ) : (
                                    messages.map((msg, idx) => (
                                        <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                            <div className={`max-w-[80%] p-3 rounded-2xl text-sm leading-relaxed ${
                                                msg.role === 'user' 
                                                ? 'bg-slamRed text-white rounded-tr-none' 
                                                : 'bg-white text-gray-800 shadow-sm border border-gray-100 rounded-tl-none'
                                            }`}>
                                                {msg.text}
                                            </div>
                                        </div>
                                    ))
                                )}
                                {isLoading && (
                                    <div className="flex justify-start">
                                        <div className="bg-white p-3 rounded-2xl shadow-sm border border-gray-100">
                                            <div className="flex gap-1">
                                                <div className="w-2 h-2 bg-gray-300 rounded-full animate-bounce"></div>
                                                <div className="w-2 h-2 bg-gray-300 rounded-full animate-bounce delay-75"></div>
                                                <div className="w-2 h-2 bg-gray-300 rounded-full animate-bounce delay-150"></div>
                                            </div>
                                        </div>
                                    </div>
                                )}
                                <div ref={messagesEndRef} />
                            </div>

                            {/* Input Area */}
                            {apiKey && (
                                <div className="p-4 bg-white border-t border-gray-100">
                                    <div className="flex gap-2">
                                        <input 
                                            type="text" 
                                            className="flex-1 bg-gray-100 rounded-full px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-slamRed/50"
                                            placeholder="Í∂ÅÍ∏àÌïú Ï†êÏùÑ Î¨ºÏñ¥Î≥¥ÏÑ∏Ïöî..."
                                            value={input}
                                            onChange={(e) => setInput(e.target.value)}
                                            onKeyPress={(e) => e.key === 'Enter' && handleSend()}
                                        />
                                        <button 
                                            onClick={handleSend}
                                            className="w-12 h-12 bg-gray-900 rounded-full text-white flex items-center justify-center hover:bg-gray-700 transition-colors"
                                        >
                                            <i className="ph ph-paper-plane-right text-lg"></i>
                                        </button>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </>
            );
        };

        // 3. Main Application Structure
        const App = () => {
            const [data, setData] = useState(INITIAL_DATA);
            const [activeMenu, setActiveMenu] = useState('dashboard');
            const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
            const [modalContent, setModalContent] = useState(null);
            const [isLoadingData, setIsLoadingData] = useState(true);

            // Responsive Layout Handling
            const isDesktop = window.innerWidth >= 1024;

            // Fetch Data from Google Sheets via App Script
            useEffect(() => {
                const fetchData = async () => {
                    setIsLoadingData(true);
                    try {
                        // Fetch all sheets in parallel
                        // Note: Ensure your Google Sheet has tabs named 'Scrum', 'Cleaning', 'Operation', 'Manual'
                        const categories = ['scrum', 'cleaning', 'operation', 'manual'];
                        
                        // Using Promise.all to fetch them concurrently
                        // If a sheet doesn't exist, the GAS should return an empty array or error object as handled in doGet
                        const fetchPromises = categories.map(type => 
                            fetch(`${GAS_API_URL}?type=${type}`)
                                .then(res => res.json())
                                .catch(err => {
                                    console.warn(`Failed to fetch ${type}:`, err);
                                    return null;
                                })
                        );

                        const results = await Promise.all(fetchPromises);
                        
                        const newData = { ...INITIAL_DATA };
                        
                        // Update state only if valid data is returned
                        categories.forEach((type, index) => {
                            const result = results[index];
                            if (result && Array.isArray(result) && result.length > 0) {
                                newData[type] = result;
                            }
                        });

                        setData(newData);
                    } catch (error) {
                        console.error("Error fetching data:", error);
                        // Fallback to INITIAL_DATA is automatic
                    } finally {
                        setIsLoadingData(false);
                    }
                };

                fetchData();
            }, []);

            const handleMenuClick = (menu) => {
                setActiveMenu(menu);
                setIsMobileMenuOpen(false);
            };

            const openDetailModal = (item) => {
                setModalContent({
                    title: item.title || item.task || 'ÏÉÅÏÑ∏ Ï†ïÎ≥¥',
                    content: item.detail || item.content || item.desc || 'ÏÉÅÏÑ∏ ÎÇ¥Ïö©Ïù¥ ÏóÜÏäµÎãàÎã§.'
                });
            };

            // --- Sub-components for Views ---
            
            const DashboardView = () => (
                <div className="space-y-6 animate-fade-in">
                    {/* Header Card */}
                    <div className="bg-white p-6 rounded-3xl shadow-sm border border-gray-100 flex justify-between items-center">
                        <div>
                            <h2 className="text-2xl font-bold text-gray-900">ÏïàÎÖïÌïòÏÑ∏Ïöî, Ï†êÏû•Îãò! üëã</h2>
                            <p className="text-gray-500 mt-1 mobile-text-sm">Ïò§ÎäòÎèÑ Ïä¨Îû®Î≤ÑÍ±∞ÏôÄ Ìï®Íªò ÌûòÏ∞®Í≤å ÏãúÏûëÌï¥Î¥êÏöî.</p>
                            {isLoadingData && <span className="text-xs text-slamRed mt-1 block">‚è≥ Îç∞Ïù¥ÌÑ∞ ÎèôÍ∏∞Ìôî Ï§ë...</span>}
                        </div>
                        <div className="hidden sm:block text-right">
                            <div className="text-sm text-gray-400">{new Date().toLocaleDateString()}</div>
                            <div className="text-slamRed font-bold">Ïò§Ìîà Ï§ÄÎπÑ Ï§ë</div>
                        </div>
                    </div>

                    {/* Stats Grid */}
                    <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
                        {[
                            { label: 'Ïä§ÌÅ¨Îüº ÎØ∏ÏÖò', value: '2/3', icon: 'check-square', color: 'text-blue-500' },
                            { label: 'Ï≤≠Í≤∞ÎèÑ Ï†êÏàò', value: 'A', icon: 'sparkle', color: 'text-yellow-500' },
                            { label: 'ÎØ∏Ìù° ÏÇ¨Ìï≠', value: '0Í±¥', icon: 'warning-circle', color: 'text-green-500' },
                            { label: 'Îß§Ï∂ú Îã¨ÏÑ±Î•†', value: '95%', icon: 'chart-line-up', color: 'text-slamRed' },
                        ].map((stat, i) => (
                            <div key={i} className="bg-white p-5 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow">
                                <i className={`ph ph-${stat.icon} ${stat.color} text-2xl mb-2`}></i>
                                <div className="text-gray-400 text-xs">{stat.label}</div>
                                <div className="text-xl font-bold text-gray-900">{stat.value}</div>
                            </div>
                        ))}
                    </div>

                    {/* Quick Action Cards (Scrum & Operation) */}
                    <div className="grid lg:grid-cols-2 gap-6">
                        {/* Daily Scrum */}
                        <div className="bg-white p-6 rounded-3xl shadow-sm border border-gray-100">
                            <div className="flex justify-between items-center mb-6">
                                <h3 className="text-lg font-bold flex items-center gap-2">
                                    <i className="ph ph-clipboard-text text-slamRed"></i> Îç∞ÏùºÎ¶¨ Ïä§ÌÅ¨Îüº
                                </h3>
                                <button onClick={() => handleMenuClick('scrum')} className="text-sm text-gray-400 hover:text-gray-600">ÎçîÎ≥¥Í∏∞</button>
                            </div>
                            <ul className="space-y-4">
                                {data.scrum.slice(0, 3).map((item, idx) => (
                                    <li key={item.id || idx} className="flex items-start gap-3 p-3 bg-gray-50 rounded-xl">
                                        <input type="checkbox" className="mt-1 w-5 h-5 accent-slamRed rounded cursor-pointer" />
                                        <div className="flex-1">
                                            <div className="font-semibold text-gray-800 text-sm">{item.title}</div>
                                            <div className="text-xs text-gray-500 mt-1">{item.desc}</div>
                                        </div>
                                        <button onClick={() => openDetailModal(item)} className="text-gray-300 hover:text-slamRed">
                                            <i className="ph ph-question text-lg"></i>
                                        </button>
                                    </li>
                                ))}
                            </ul>
                        </div>

                        {/* Operation Check */}
                        <div className="bg-white p-6 rounded-3xl shadow-sm border border-gray-100">
                            <div className="flex justify-between items-center mb-6">
                                <h3 className="text-lg font-bold flex items-center gap-2">
                                    <i className="ph ph-clock text-slamRed"></i> Ïö¥ÏòÅ Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏
                                </h3>
                                <button onClick={() => handleMenuClick('operation')} className="text-sm text-gray-400 hover:text-gray-600">ÎçîÎ≥¥Í∏∞</button>
                            </div>
                            <div className="relative border-l-2 border-gray-100 ml-3 space-y-6">
                                {data.operation.slice(0, 3).map((op, i) => (
                                    <div key={op.id || i} className="ml-6 relative">
                                        <span className="absolute -left-[31px] bg-white border-2 border-slamRed w-4 h-4 rounded-full"></span>
                                        <div className="flex justify-between items-start">
                                            <div>
                                                <span className="text-xs font-bold text-slamRed bg-red-50 px-2 py-1 rounded-md">{op.time}</span>
                                                <div className="font-semibold text-gray-800 mt-1">{op.task}</div>
                                            </div>
                                            <button onClick={() => openDetailModal(op)} className="text-gray-300 hover:text-slamRed">
                                                <i className="ph ph-question text-lg"></i>
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );

            // Lists Views (Reused Logic)
            const ListView = ({ title, dataList, icon }) => (
                <div className="animate-fade-in space-y-4">
                    <div className="flex items-center gap-3 mb-6">
                        <div className="p-3 bg-white rounded-2xl shadow-sm text-slamRed">
                            <i className={`ph ph-${icon} text-2xl`}></i>
                        </div>
                        <h2 className="text-2xl font-bold">{title}</h2>
                        {isLoadingData && <span className="text-xs bg-gray-100 text-gray-500 px-2 py-1 rounded">ÎèôÍ∏∞Ìôî Ï§ë...</span>}
                    </div>
                    <div className="grid gap-4">
                        {dataList && dataList.length > 0 ? (
                            dataList.map((item, idx) => (
                                <div key={idx} className="bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex items-center justify-between hover:border-slamRed/30 transition-colors cursor-pointer"
                                     onClick={() => openDetailModal(item)}>
                                    <div>
                                        <div className="flex items-center gap-2 mb-1">
                                            <span className="text-lg font-bold text-gray-900">{item.title || item.task}</span>
                                            {item.cycle && <span className="text-xs bg-gray-100 text-gray-500 px-2 py-0.5 rounded">{item.cycle}</span>}
                                        </div>
                                        <p className="text-sm text-gray-500 line-clamp-1">{item.desc || item.detail || item.content}</p>
                                    </div>
                                    <i className="ph ph-caret-right text-gray-300"></i>
                                </div>
                            ))
                        ) : (
                            <div className="text-center py-10 text-gray-400">Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.</div>
                        )}
                    </div>
                </div>
            );

            // --- Main Layout ---
            return (
                <div className="min-h-screen flex flex-col lg:flex-row">
                    {/* Mobile Header */}
                    <header className="lg:hidden bg-white p-4 sticky top-0 z-20 flex justify-between items-center shadow-sm">
                        <h1 className="text-xl font-extrabold text-slamRed tracking-tighter">SLAM BURGER</h1>
                        <button onClick={() => setIsMobileMenuOpen(true)} className="p-2 text-gray-700">
                            <i className="ph ph-list text-2xl"></i>
                        </button>
                    </header>

                    {/* Sidebar / Desktop Nav */}
                    <aside className={`fixed inset-y-0 left-0 w-64 bg-white shadow-2xl lg:shadow-none lg:static lg:border-r border-gray-200 z-30 transform transition-transform duration-300 ${isMobileMenuOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'}`}>
                        <div className="p-6 flex justify-between items-center lg:block">
                            <h1 className="text-2xl font-extrabold text-slamRed tracking-tighter hidden lg:block mb-8">SLAM BURGER</h1>
                            <span className="lg:hidden font-bold text-lg">Î©îÎâ¥</span>
                            <button onClick={() => setIsMobileMenuOpen(false)} className="lg:hidden p-2 text-gray-500">
                                <i className="ph ph-x text-xl"></i>
                            </button>
                        </div>
                        
                        <nav className="px-4 space-y-2">
                            {[
                                { id: 'dashboard', icon: 'squares-four', label: 'ÎåÄÏãúÎ≥¥Îìú' },
                                { id: 'scrum', icon: 'clipboard-text', label: 'Ïä§ÌÅ¨Îüº/Î™©Ìëú' },
                                { id: 'operation', icon: 'clock', label: 'Ïö¥ÏòÅ Ï≤¥ÌÅ¨' },
                                { id: 'cleaning', icon: 'sparkle', label: 'Ï≤≠Í≤∞ Í¥ÄÎ¶¨' },
                                { id: 'manual', icon: 'book-open', label: 'Îß§Îâ¥Ïñº' },
                            ].map(menu => (
                                <button
                                    key={menu.id}
                                    onClick={() => handleMenuClick(menu.id)}
                                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-medium ${
                                        activeMenu === menu.id 
                                        ? 'bg-slamRed text-white shadow-lg shadow-red-200' 
                                        : 'text-gray-600 hover:bg-gray-100'
                                    }`}
                                >
                                    <i className={`ph ph-${menu.icon} text-xl`}></i>
                                    {menu.label}
                                </button>
                            ))}
                        </nav>

                        <div className="absolute bottom-0 w-full p-6 bg-gray-50 border-t border-gray-100">
                            <div className="flex items-center gap-3">
                                <div className="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center text-gray-500">
                                    <i className="ph ph-user"></i>
                                </div>
                                <div>
                                    <div className="font-bold text-sm">Í¥ÄÎ¶¨Ïûê</div>
                                    <div className="text-xs text-gray-500">Í∞ïÎÇ®Ï†ê</div>
                                </div>
                            </div>
                        </div>
                    </aside>

                    {/* Overlay for Mobile Sidebar */}
                    {isMobileMenuOpen && (
                        <div className="fixed inset-0 bg-black/50 z-20 lg:hidden" onClick={() => setIsMobileMenuOpen(false)}></div>
                    )}

                    {/* Main Content Area */}
                    <main className="flex-1 p-4 lg:p-8 max-w-7xl mx-auto w-full pb-24 lg:pb-8">
                        {activeMenu === 'dashboard' && <DashboardView />}
                        {activeMenu === 'scrum' && <ListView title="Ïä§ÌÅ¨Îüº & Î™©Ìëú" dataList={data.scrum} icon="clipboard-text" />}
                        {activeMenu === 'operation' && <ListView title="Ïö¥ÏòÅ Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏" dataList={data.operation} icon="clock" />}
                        {activeMenu === 'cleaning' && <ListView title="Îß§Ïû• Ï≤≠Í≤∞ Í¥ÄÎ¶¨" dataList={data.cleaning} icon="sparkle" />}
                        {activeMenu === 'manual' && <ListView title="Ïö¥ÏòÅ Îß§Îâ¥Ïñº" dataList={data.manual} icon="book-open" />}
                    </main>

                    {/* Chatbot Widget */}
                    <ChatBot />

                    {/* Detail Modal */}
                    <Modal 
                        isOpen={!!modalContent} 
                        onClose={() => setModalContent(null)}
                        title={modalContent?.title}
                    >
                        {modalContent?.content}
                    </Modal>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
